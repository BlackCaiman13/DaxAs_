<ion-header collapse="fade">
  <ion-toolbar>
    <ion-title >Demandes</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="request-content">
  <div class="request-container">
    @if (loading) {
      <div class="loading-container">
        <ion-spinner name="crescent"></ion-spinner>
        <p>Chargement des demandes...</p>
      </div>
    } @else if (requests.length === 0) {
      <div class="empty-state">
        <ion-icon name="document-text-outline" size="large"></ion-icon>
        <h2>Aucune demande</h2>
        <p>Vous n'avez pas encore créé de demande de réparation</p>
        <ion-button [routerLink]="['/new-request']" color="primary">
          Créer une demande
        </ion-button>
      </div>
    } @else {
      <ion-list lines="none" class="request-list">
        @for (req of requests; track req.id) {
          <ion-item class="request-item">
            <div class="request-header">
              <div class="request-info">
                <span class="request-title">{{req.model}}</span>
                <span class="request-id">Request ID: #{{req.id}}</span>
              </div>
            </div>
            <div class="request-body">
              <span class="request-status" [ngStyle]="{'background': getStatusColor(req.status), 'color': '#fff'}">
                {{getStatusLabel(req.status)}}
              </span>
              <div class="request-actions">
                <a class="voir-plus" [routerLink]="['/tabs/view-details']" [state]="{request: req}">voir plus</a>
              </div>
            </div>
          </ion-item>
        }
      </ion-list>
      <div class="support-buttons">
        <ion-button expand="block" fill="outline" color="medium" class="support-btn">Email </ion-button>
        <ion-button expand="block" color="primary" class="support-btn">Chat</ion-button>
      </div>
    }
  </div>
</ion-content>

